<link rel="import" href="view.html">

<polymer-element name="x-tabs" attributes="">
	<template>
		<style type="text/css">
			ul.bar {
				margin: 0;
				padding: 0;
				list-style-type: none;
			}
			
			ul.bar>li {
				display: inline-block;
			}
			
			ul.tabs {
				margin: 10px 16px;
				display: inline-block;
			}
			
			ul.tabs>li>a {
				text-decoration: none;
				color: #f49237;
				border-bottom: 3px solid transparent;
				font-weight: 700;
				padding: 6px;
			}
			
			ul.tabs>li.active>a {
				border-bottom: 3px solid #f49237;
			}
			
			.wrapper {
				margin: 0 auto;
				max-width: 1024px;
			}
		</style>
		<div class="wrapper">
			<ul class="bar tabs">
				<template repeat="{{tab, index in tabs}}">
					<li class="{{ { active: index === activeTabIndex } | tokenList }}">
						<a href="{{tab.link}}" on-click="{{onactivate}}" data-index="{{index}}">{{tab.name}}</a>
					</li>
				</template>
			</ul>
		</div>
	</template>
	<script>
		(function () {
			'use strict';

			Polymer({

				onactivate: function (event, detail, sender) {

					var strIndex = sender.getAttribute('data-index'),
						index = parseInt(strIndex),
						view = this.tabs[index].view;

					this.activeTabIndex = index;
					this.updateViews(view);
				},

				updateViews: function (view) {

					document.querySelectorAll('x-view').array().forEach(function (c) {
						c.style.display = (c.id === view) ? 'block' : 'none';
					});
				},

				ready: function () {

					var model = this;

					model.activeTabIndex = 0;
					model.tabs = [];

					this.children.array().forEach(function (c) {
						model.tabs.push({
							name: c.getAttribute('name'),
							view: c.getAttribute('view'),
							link: '#'
						});
					});

					this.updateViews(model.tabs[model.activeTabIndex].view);
				}
			});

		})();
	</script>
</polymer-element>

<polymer-element name="x-tab" attributes="name view active">
	<template>
		<style type="text/css">
			div {
				padding: 20px;
			}
		</style>
		<div>
			<shadow></shadow>
		</div>
	</template>
	<script>
		(function () {
			'use strict';

			Polymer({

			});

		})();
	</script>
</polymer-element>